import { Steps } from 'nextra-theme-docs'

# Local deployment

Cafeteria can be built and run locally by following the steps below.

<Steps>

### 1. Setup environment variables

Copy `.env.example` to `.env` and fill in the environment variables.

**Next.js variables:**

    + `NEXT_PUBLIC_SERVER_URL`: The URL of the server. If you deploy the server to Vercel, you can use the URL of the server. If you deploy the server to another platform, you need to use the URL of the server.
    + `NEXTAUTH_URL`: The URL of the client. If you deploy the client to Vercel, you can use the URL of the client. If you deploy the client to another platform, you need to use the URL of the client.
    + `NEXTAUTH_SECRET`: A secret used to encrypt session data on the server. You can generate a secret using `openssl rand -hex 64`.

**Firebase variables:** Go to your Firebase project settings and copy the config. Then, add the following variables to the project. (See more [here](https://firebase.google.com/docs/web/setup#config-object))

    + `FIREBASE_API_KEY`: The API key of your Firebase project.
    + `FIREBASE_APP_ID`: The app ID of your Firebase project.
    + `FIREBASE_AUTH_DOMAIN`: The auth domain of your Firebase project.
    + `FIREBASE_DATABASE_URL`: The database URL of your Firebase project.
    + `FIREBASE_PROJECT_ID`: The project ID of your Firebase project.
    + `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET`: The storage bucket of your Firebase project.
    + `FIREBASE_MESSAGING_SENDER_ID`: The messaging sender ID of your Firebase project.

**Google OAuth variables:** Go to the [Google Cloud Console](https://console.cloud.google.com/) and create a new project. Then, enable the Google OAuth API and create a new OAuth client ID. Finally, add the following variables to the project. (See more [here](https://next-auth.js.org/providers/google)).

    + `NEXT_PUBLIC_GOOGLE_LOGIN`: Enable Google OAuth login.
    + `GOOGLE_ID`: The client ID of your Google OAuth client.
    + `GOOGLE_SECRET`: The client secret of your Google OAuth client.

**VietQR variables for online payment:** Go to the [VietQR](https://vietqr.io/) and create a new account. Then, create a new merchant and add the following variables to the project.

    + `NEXT_PUBLIC_VIETQR_MERCHANT_ACCOUNT_NAME`: The account name of your VietQR merchant.
    + `NEXT_PUBLIC_VIETQR_MERCHANT_INFO_PREFIX`: The prefix of your VietQR merchant.
    + `NEXT_PUBLIC_VIETQR_IMAGE`: The image of your VietQR merchant.

Run the development server:

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

### 2. Deployment

Build the app:

```bash
npm run build
```

Start the app:

```bash
npm run start
```

</Steps>
